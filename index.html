<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HAPPPYYY NEWWW YEARR MYYY LOVEEE!!!ğŸ¤ğŸ’‹ğŸŒ•</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  height: 100vh;
  overflow: hidden;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
  background:
    linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35)),
    url("https://images.unsplash.com/photo-1482192596544-9eb780fc7f66?auto=format&fit=crop&w=1600&q=80");
  background-size: cover;
  background-position: center;
}

.screen {
  display: none;
  max-width: 90%;
  z-index: 3;
}

.active { display: block; }

h1 {
  font-size: 2.6rem;
  margin-bottom: 15px;
  text-shadow: 0 0 20px rgba(255,255,255,0.6);
}

p {
  font-size: 1.4rem;
  line-height: 1.6;
  margin-bottom: 30px;
}

.buttons {
  display: flex;
  justify-content: space-between; /* YES left, NO right */
  align-items: center;
  gap: 40px;
  position: relative;
  width: 300px;
  margin: auto;
}

button {
  padding: 14px 32px;
  font-size: 1.1rem;
  border-radius: 30px;
  border: none;
  cursor: pointer;
  background: white;
  color: #ff4f7b;
  font-weight: bold;
}

.no { position: relative; }

/* Snowfall */
.snow {
  position: absolute;
  top: -5vh;
  color: white;
  opacity: 0.9;
  pointer-events: none;
  z-index: 1;
  animation: snowfall linear forwards;
}

@keyframes snowfall {
  to { transform: translateY(110vh); }
}

/* Slide Puzzle */
#slidePuzzle {
  width: 300px;
  height: 300px;
  margin: auto;
  display: grid;
  grid-template: repeat(3, 1fr) / repeat(3, 1fr);
  gap: 2px;
}
.slideTile {
  background-color: rgba(255,255,255,0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  cursor: pointer;
  user-select: none;
  transition: all 0.2s ease;
}
.empty { background: transparent; cursor: default; }
</style>
</head>

<body>

<script>
// Snowfall
function createSnow() {
  const snow = document.createElement("div");
  snow.className = "snow";
  snow.innerText = Math.random() > 0.5 ? "â„" : "â€¢";
  snow.style.left = Math.random() * 100 + "vw";
  snow.style.fontSize = (0.6 + Math.random() * 1.4) + "rem";
  snow.style.animationDuration = (6 + Math.random() * 6) + "s";
  document.body.appendChild(snow);
  setTimeout(() => snow.remove(), 12000);
}
setInterval(createSnow, 200);
</script>

<!-- SCREENS -->
<div class="screen active" id="s1">
  <h1>HEHEHEHE MYYY DARLINGGG!!!ğŸ¤ ğŸ’‹</h1>
  <p>Try to say noğŸ˜ğŸ˜ğŸ’‹</p>
  <div class="buttons">
    <button onclick="go('s2')">YES!!! ğŸ’‹</button>
  </div>
</div>

<div class="screen" id="s2">
  <h1>MYYY LOVEEE!!!ğŸ¤ğŸ’‹</h1>
  <p>Am I your red string???ğŸ¥ºâ™¾ï¸ğŸ¤ğŸ’‹</p>
  <div class="buttons">
    <button class="yes" onclick="go('slideGame')">YES ğŸ’—</button>
    <button class="no" onmouseover="escape(this)">NO</button>
  </div>
</div>

<!-- Slide Puzzle Game -->
<div class="screen" id="slideGame">
  <h1>Complete the Puzzle! ğŸ§©</h1>
  <p>Arrange the pieces to continue...</p>
  <div id="slidePuzzle"></div>
</div>

<div class="screen" id="s3">
  <h1>MYYY BABEEEEE!!ğŸ¤ğŸ’‹</h1>
  <p>Am i your most favourite person and
    you will love me more than anyone???ğŸ¥ºğŸ’‹ğŸ¤</p>
  <div class="buttons">
    <button onclick="go('snowGame')">YES ğŸ¤</button>
    <button class="no" onmouseover="escape(this)">NO</button>
  </div>
</div>

<!-- Snowflake Basket Game -->
<div class="screen" id="snowGame">
  <h1>Catch 10 Snowflakes! â„ï¸ğŸ’—</h1>
  <p>Avoid the bombs âŒ. Collect 10 special snowflakes to continue.</p>
  <canvas id="basketCanvas" width="400" height="300" style="border-radius:15px;"></canvas>
  <p id="scoreDisplay">Snowflakes: 0 / 10</p>
</div>

<div class="screen" id="s4">
  <h1>MYYY KUCHUUUUPUCHUUUU!!!ğŸ¤ğŸŒ•ğŸ’‹</h1>
  <p>Will you stay forever with me???ğŸ¥ºğŸ¥ºğŸ¤ğŸ›ğŸ’‹ğŸŒ•</p>
  <div class="buttons">
    <button onclick="go('final')">YES ğŸ’</button>
    <button class="no" onmouseover="escape(this)">NO</button>
  </div>
</div>

<div class="screen" id="final">
  <h1>HAPPPPY NEWW YEAR MYYY LOVEEE!!!ğŸ¤ğŸ’‹</h1>
  <p>
    Thank you for choosing me, loving me, and staying with me!!ğŸ’‹  
    <br><br>
    We will live forever!!â™¾ï¸ğŸ¤ 
    Explore the world!!ğŸ’‹ğŸŒ•ğŸŒ‘  
    And grow old together!!ğŸ›ğŸ’ğŸ¦¢  
    YOU ARE MY RED STRING RIGHT???ğŸ¤ğŸŒ•ğŸ’‹
    <br><br>
    MYYY DARLINGGG, MYYY BABEEEEE, MYYY KUCHUUUUPUCHUUUU!!...You are literally my everything!!!!ğŸ¥ºâ™¾ï¸ğŸ¤ğŸ’‹  
    <br><br>
    Forever us!!!ğŸŒ•ğŸ’‹
  </p>
</div>

<script>
// Basic navigation
function go(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function escape(btn) {
  btn.style.left = Math.random() * 70 + "%";
  btn.style.top = Math.random() * 40 + "px";
}

// ---------------------
// Slide Puzzle Game
// ---------------------
const puzzleContainer = document.getElementById("slidePuzzle");
let puzzleArray = [];
const size = 3;

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function initSlidePuzzle() {
  puzzleArray = [];
  for (let i = 1; i < size*size; i++) puzzleArray.push(i);
  puzzleArray.push(null);
  shuffle(puzzleArray);
  renderPuzzle();
}

function renderPuzzle() {
  puzzleContainer.innerHTML = '';
  puzzleArray.forEach((num, idx) => {
    const div = document.createElement("div");
    div.className = 'slideTile' + (num === null ? ' empty' : '');
    if(num) div.innerText = num;
    div.onclick = () => moveTile(idx);
    puzzleContainer.appendChild(div);
  });
}

function moveTile(idx) {
  const emptyIdx = puzzleArray.indexOf(null);
  const x1 = idx % size, y1 = Math.floor(idx / size);
  const x2 = emptyIdx % size, y2 = Math.floor(emptyIdx / size);
  if ((Math.abs(x1 - x2) + Math.abs(y1 - y2)) === 1) {
    [puzzleArray[idx], puzzleArray[emptyIdx]] = [puzzleArray[emptyIdx], puzzleArray[idx]];
    renderPuzzle();
    checkPuzzleComplete();
  }
}

function checkPuzzleComplete() {
  for(let i=0;i<puzzleArray.length-1;i++) if(puzzleArray[i] !== i+1) return;
  go('s3'); // Complete puzzle, go to next question
}

initSlidePuzzle();

// ---------------------
// Snowflake Basket Game
// ---------------------
const canvas = document.getElementById('basketCanvas');
const ctx = canvas.getContext('2d');
let basketX = canvas.width/2 - 30;
let targetX = basketX;
const basketWidth = 60, basketHeight = 20;
let snowflakes = [];
let score = 0;
let gameInterval;

function spawnSnowflake() {
  const type = Math.random() < 0.8 ? 'special' : 'bomb';
  snowflakes.push({
    x: Math.random() * (canvas.width-20),
    y: -20,
    size: 20,
    type: type,
    speed: 1 + Math.random()*2
  });
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  
  // Draw basket (brown)
  ctx.fillStyle = '#8B4513';
  ctx.beginPath();
  ctx.moveTo(basketX, canvas.height - basketHeight -5);
  ctx.lineTo(basketX + basketWidth, canvas.height - basketHeight -5);
  ctx.lineTo(basketX + basketWidth -5, canvas.height -5);
  ctx.lineTo(basketX +5, canvas.height -5);
  ctx.closePath();
  ctx.fill();

  // Draw snowflakes and bombs
  snowflakes.forEach(f => {
    if(f.type==='special') {
      ctx.fillStyle = '#FFD700';
      ctx.beginPath();
      ctx.arc(f.x, f.y, f.size/2,0,Math.PI*2);
      ctx.fill();
    } else {
      ctx.fillStyle = 'black';
      ctx.beginPath();
      ctx.arc(f.x, f.y, f.size/2,0,Math.PI*2);
      ctx.fill();
      // fuse
      ctx.strokeStyle='orange';
      ctx.beginPath();
      ctx.moveTo(f.x, f.y-f.size/2);
      ctx.lineTo(f.x, f.y-f.size);
      ctx.stroke();
    }
    f.y += f.speed;

    if(f.y + f.size > canvas.height - basketHeight - 5 &&
       f.x + f.size > basketX && f.x < basketX + basketWidth) {
      if(f.type==='special') score++;
      else score = Math.max(0, score-1);
      f.collected = true;
      document.getElementById('scoreDisplay').innerText = 'Snowflakes: '+score+' / 10';
      if(score>=10){ clearInterval(gameInterval); go('s4'); }
    }
  });
  snowflakes = snowflakes.filter(f => !f.collected && f.y<canvas.height+30);
  requestAnimationFrame(draw);
}

// smooth sliding basket
canvas.addEventListener('mousemove', e => {
  const rect = canvas.getBoundingClientRect();
  targetX = e.clientX - rect.left - basketWidth/2;
});

function updateBasket() {
  basketX += (targetX - basketX) * 0.1;
  if(basketX<0) basketX=0;
  if(basketX>canvas.width-basketWidth) basketX=canvas.width-basketWidth;
  requestAnimationFrame(updateBasket);
}
updateBasket();

function startSnowGame() {
  snowflakes=[];
  score=0;
  document.getElementById('scoreDisplay').innerText = 'Snowflakes: 0 / 10';
  gameInterval = setInterval(spawnSnowflake, 800);
  draw();
}

document.getElementById('snowGame').addEventListener('click', startSnowGame,{once:true});
</script>

</body>
  </html>
